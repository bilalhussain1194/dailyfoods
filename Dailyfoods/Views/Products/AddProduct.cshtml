@model Dailyfoods.Viewmodel.AddProductViewmodel

@{
    ViewBag.Title = "AddProduct";

    Layout = "~/Views/Shared/_DailyfoodsAdminMaster.cshtml";
}

<h2>AddProduct</h2>

@using (Html.BeginForm("AddProduct", "Products", FormMethod.Post, htmlAttributes: new { @enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Product</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.products.name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.products.name, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.qty, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.qty, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.products.qty, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.description, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.description, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.products.description, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.price, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.price, new { htmlAttributes = new { @class = "form-control", @type = "number" } })
                @Html.ValidationMessageFor(model => model.products.price, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.special_price, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.special_price, new { htmlAttributes = new { @class = "form-control", @type = "number" } })
                @Html.ValidationMessageFor(model => model.products.special_price, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.date_from, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.date_from, new { htmlAttributes = new { @class = "form-control", @type = "date" } })
                @Html.ValidationMessageFor(model => model.products.date_from, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.date_to, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.date_to, new { htmlAttributes = new { @class = "form-control", @type = "date" } })
                @Html.ValidationMessageFor(model => model.products.date_to, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.created_date, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.created_date, new { htmlAttributes = new { @class = "form-control", @type = "date" } })
                @Html.ValidationMessageFor(model => model.products.created_date, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.products.sku, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
                @Html.EditorFor(model => model.products.sku, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.products.sku, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.category.id, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-6">
              
                @Html.DropDownListFor(model => model.category.id, new SelectList(Model.category_list, "id", "name"), "please select category ", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.category.id, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-control">

            <label>Upload Files</label>
            <input type="file" class="form-control" multiple name="FileUpload" id="FileUpload" />
        </div>
        <div class="form-control">
            <div id="DynamicsImages">

            </div>

        </div>
        <input type="submit" name="upload" value="submit" />
        

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
  
}


<div>
    @Html.ActionLink("Back to List", "Index")
</div>
  @if(ViewBag.successmessage!=null)
    {
<script>alert(@ViewBag.successmessage);</script>
    }
    else
    {
    }
@*<script>
    debugger
    var loadfile = function (event) {

        var file = event.target.files;
        for(var i=0;i<file.lenght;i++)
        {
            $("#DynamicsImages").append("<image src='" + URL.createObjectURL(event.target.files[i]) + "' class='dynamicimages'</br>")
        }

    }
</script>*@
@*<script>
    $("#FileUpload").on('change', function () {



        var input = $(this)[0];


        if (input.files && input.files[0]) {

            var data = new FormData();
            data.append("UploadedFile", input.files[0]);

            $.ajax({
                type: "POST",
                url: "upload_service.ashx?id=5",
                contentType: false,
                processData: false,
                data: data,
                success: function (data) {
                    if (data != "001" && data != "999") {

                        var _org_image = base_url + 'content/items/original/' + data.FileName;

                        var _html = "<div class='col-sm-2' style='padding-left: 0px; padding-right: 0px;'>" +
                            "           <ul class='thumbnails gallery' style='padding-left: 0px; margin-bottom: 0px;'>" +
                            "               <li id='image-1' class='thumbnail' style='margin-left: 0px; margin-bottom: 15px !important;'>" +
                            "                   <a style='background:url(" + _org_image + "); width: 147px; height: 147px; background-size: 147px 147px; background-repeat: no-repeat;' title='' href='" + _org_image + "'>" +
                            "                       <img class='grayscale' src='" + _org_image + "' style='width: 147px; height: 147px;' alt='' data-srno='" + data.SrNo + "' data-orgimg='" + data.FileName + "'>" +
                            "                   </a>" +
                            "               </li>" +
                            "           </ul>" +
                            "       </div>";

                        item_srno = data.SrNo;
                        $("#FileUpload1").val('');
                        $("#txtImageURL").val(data.FileName);
                        $("#txtuseCropper").val("0");
                        $("#divItemImages").append(_html);


                        initializeGallery();

                        setCroperData();
                        $image.cropper('destroy').cropper(options);
                        showCroper();
                        $("#croppedModal").modal();
                    }
                    else {
                        alert('failed to create thumbnails');
                    }

                },
                error: function (data) {
                    console.log('Upload error');
                }
            });
        }
    });



</script>*@
